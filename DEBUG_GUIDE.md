# üêõ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ—Ç–ª–∞–¥–∫–µ STM32 —Å Cortex-Debug

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ F411CE –≤ VS Code —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º Cortex-Debug ‚Äî –æ—Ç –æ—Å–Ω–æ–≤ –¥–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ç–µ—Ö–Ω–∏–∫.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ß—Ç–æ —Ç–∞–∫–æ–µ –æ—Ç–ª–∞–¥–∫–∞](#—á—Ç–æ-—Ç–∞–∫–æ–µ-–æ—Ç–ª–∞–¥–∫–∞)
2. [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Cortex-Debug](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-cortex-debug)
3. [–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –æ—Ç–ª–∞–¥–∫–∏](#–ø–µ—Ä–≤—ã–π-–∑–∞–ø—É—Å–∫-–æ—Ç–ª–∞–¥–∫–∏)
4. [–û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–ª–∞–¥—á–∏–∫–æ–º](#–æ—Å–Ω–æ–≤—ã-—Ä–∞–±–æ—Ç—ã-—Å-–æ—Ç–ª–∞–¥—á–∏–∫–æ–º)
5. [–¢–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ (Breakpoints)](#—Ç–æ—á–∫–∏-–æ—Å—Ç–∞–Ω–æ–≤–∞-breakpoints)
6. [–ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ](#–ø–æ—à–∞–≥–æ–≤–æ–µ-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
7. [–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö](#–ø—Ä–æ—Å–º–æ—Ç—Ä-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
8. [–°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤](#—Å—Ç–µ–∫-–≤—ã–∑–æ–≤–æ–≤)
9. [–†–µ–≥–∏—Å—Ç—Ä—ã –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è](#—Ä–µ–≥–∏—Å—Ç—Ä—ã-–∏-–ø–µ—Ä–∏—Ñ–µ—Ä–∏—è)
10. [–û—Ç–ª–∞–¥–∫–∞ FreeRTOS](#–æ—Ç–ª–∞–¥–∫–∞-freertos)
11. [–¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–ª–∞–¥–∫–∏](#—Ç–∏–ø–∏—á–Ω—ã–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏-–æ—Ç–ª–∞–¥–∫–∏)
12. [SWO —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞](#swo-—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞)
13. [–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏](#–≥–æ—Ä—è—á–∏–µ-–∫–ª–∞–≤–∏—à–∏)
14. [Troubleshooting](#troubleshooting)

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ –æ—Ç–ª–∞–¥–∫–∞

**–û—Ç–ª–∞–¥–∫–∞ (debugging)** ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –ø—É—Ç—ë–º –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞?

–í –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (STM32) –æ—Ç–ª–∞–¥–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- üîç **–ù–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –∑–∞–≤–∏—Å–∞–Ω–∏—è** (hardfault, assert, infinite loop)
- üìä **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** –≤ runtime
- üéØ **–ü–æ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã** —Å–ª–æ–∂–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚ö° **–û—Ç—Å–ª–µ–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –∏ RTOS –∑–∞–¥–∞—á
- üß™ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–∏—Ñ–µ—Ä–∏—é** (GPIO, UART, SPI, etc.)

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –æ—Ç–ª–∞–¥–∫–∞ printf

‚ùå **–ü–ª–æ—Ö–æ**:
```c
printf("value = %d\n", value);  // –ú–µ–¥–ª–µ–Ω–Ω–æ, –∑–∞—Å–æ—Ä—è–µ—Ç –∫–æ–¥
HAL_Delay(1000);                // –ò—Å–∫–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
```

‚úÖ **–•–æ—Ä–æ—à–æ**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–ª–∞–¥—á–∏–∫ –¥–ª—è –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞.

---

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Cortex-Debug

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–ª–∞–¥–∫–∏ (F5) –≤ VS Code –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏:

### –ü–∞–Ω–µ–ª—å Debug (—Å–ª–µ–≤–∞)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üîç VARIABLES                    ‚îÇ  ‚Üê –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ Local                      ‚îÇ
‚îÇ   ‚îî‚îÄ Global                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üëÅÔ∏è WATCH                        ‚îÇ  ‚Üê –í—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ <add expression>           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìû CALL STACK                   ‚îÇ  ‚Üê –°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îî‚îÄ main() main.c:479          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üî¥ BREAKPOINTS                  ‚îÇ  ‚Üê –°–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ –æ—Å—Ç–∞–Ω–æ–≤–∞
‚îÇ   ‚îî‚îÄ main.c:102                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üßµ CORTEX REGISTERS             ‚îÇ  ‚Üê –†–µ–≥–∏—Å—Ç—Ä—ã ARM Cortex-M4
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üíæ CORTEX PERIPHERALS           ‚îÇ  ‚Üê –ü–µ—Ä–∏—Ñ–µ—Ä–∏—è STM32 (SVD)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–æ–π (–≤–≤–µ—Ä—Ö—É)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚ñ∂Ô∏è Continue  ‚è∏Ô∏è Pause  üîÑ Restart  ‚èπÔ∏è Stop   ‚îÇ
‚îÇ  ‚§µÔ∏è Step Over  ‚¨áÔ∏è Step Into  ‚¨ÜÔ∏è Step Out     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –æ—Ç–ª–∞–¥–∫–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ ST-Link** –∫ –ü–ö –∏ –ø–ª–∞—Ç–µ BlackPill
2. **–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**: `Ctrl+Shift+B` (–∏–ª–∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
3. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ –ø–ª–∞—Ç–∞ –∑–∞–ø–∏—Ç–∞–Ω–∞ (3.3V)

### –ó–∞–ø—É—Å–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `Core/Src/main.c`
2. –ù–∞–∂–º–∏—Ç–µ **F5** (–∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É Run and Debug ‚Üí Debug (OpenOCD))

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
```
1. VS Code —Å–æ–±–µ—Ä—ë—Ç –ø—Ä–æ–µ–∫—Ç (make -C Debug all)
2. OpenOCD –ø—Ä–æ—à—å—ë—Ç .elf –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
3. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ main()
4. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å –æ—Ç–ª–∞–¥–∫–∏
```

### –ü–µ—Ä–≤–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ `main()`:

```c
int main(void) {
  /* USER CODE BEGIN 1 */
  last_rx_time = 0;  ‚Üê –ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–¥–µ—Å—å
```

**–ñ—ë–ª—Ç–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–ª–∞–¥—á–∏–∫–æ–º

### 1. Continue (–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å) ‚Äî F5

‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–æ —Å–ª–µ–¥—É—é—â–µ–π —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ –∏–ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ø–æ—Å–ª–µ –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º—ã.

### 2. Pause (–ü–∞—É–∑–∞) ‚Äî F6

‚è∏Ô∏è –ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—Ç–µ.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–ª–∞ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –≥–¥–µ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è.

### 3. Restart (–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫) ‚Äî Ctrl+Shift+F5

üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É —Å –Ω–∞—á–∞–ª–∞ (reset + halt –Ω–∞ main).

### 4. Stop (–û—Å—Ç–∞–Ω–æ–≤–∫–∞) ‚Äî Shift+F5

‚èπÔ∏è –ó–∞–≤–µ—Ä—à–∞–µ—Ç —Å–µ—Å—Å–∏—é –æ—Ç–ª–∞–¥–∫–∏ –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

---

## –¢–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ (Breakpoints)

**Breakpoint** ‚Äî –º–µ—Ç–∫–∞ –≤ –∫–æ–¥–µ, –≥–¥–µ –æ—Ç–ª–∞–¥—á–∏–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

### –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å breakpoint

1. **–ö–ª–∏–∫ –Ω–∞ –Ω–æ–º–µ—Ä–µ —Å—Ç—Ä–æ–∫–∏** (—Å–ª–µ–≤–∞ –æ—Ç –∫–æ–¥–∞) ‚Äî –ø–æ—è–≤–∏—Ç—Å—è –∫—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ üî¥
2. –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ —Å—Ç—Ä–æ–∫—É –∏ –Ω–∞–∂–º–∏—Ç–µ **F9**

**–ü—Ä–∏–º–µ—Ä:**
```c
void StartDefaultTask(void *argument) {
  printf_uart3("Default Task running...\r\n");
  uint32_t diag_divider = 0;
  for (;;) {
    vTaskDelay(pdMS_TO_TICKS(1000));  üî¥ ‚Üê Breakpoint –∑–¥–µ—Å—å
    printf_uart3("Tick:%lu\r\n", HAL_GetTick());
    // ...
  }
}
```

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ.

### –¢–∏–ø—ã breakpoints

#### 1. –û–±—ã—á–Ω—ã–π breakpoint
–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏.

#### 2. Conditional breakpoint (—É—Å–ª–æ–≤–Ω—ã–π)
–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è.

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å:**
1. –ü–ö–ú –Ω–∞ –∫—Ä–∞—Å–Ω–æ–π —Ç–æ—á–∫–µ ‚Üí Edit Breakpoint
2. –í–≤–µ–¥–∏—Ç–µ —É—Å–ª–æ–≤–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: `diag_divider == 3`

**–ü—Ä–∏–º–µ—Ä:**
```c
if (++diag_divider >= 5) {  üî¥ –£—Å–ª–æ–≤–∏–µ: diag_divider == 5
  diag_divider = 0;
```

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ `diag_divider` —Ä–∞–≤–µ–Ω 5.

#### 3. Logpoint (—Ç–æ—á–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
–í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Debug Console –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å:**
1. –ü–ö–ú –Ω–∞ –Ω–æ–º–µ—Ä–µ —Å—Ç—Ä–æ–∫–∏ ‚Üí Add Logpoint
2. –í–≤–µ–¥–∏—Ç–µ: `Tick: {HAL_GetTick()}`

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ breakpoints

**–ü–∞–Ω–µ–ª—å BREAKPOINTS** (–ª–µ–≤–∞—è —á–∞—Å—Ç—å):
- ‚òëÔ∏è –ß–µ–∫–±–æ–∫—Å ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å
- üóëÔ∏è –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí Remove ‚Äî —É–¥–∞–ª–∏—Ç—å
- üö´ Remove All ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ

---

## –ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### Step Over (F10) ‚Äî –®–∞–≥ —á–µ—Ä–µ–∑

‚§µÔ∏è –í—ã–ø–æ–ª–Ω—è–µ—Ç **—Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É** –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** —á—Ç–æ–±—ã –∏–¥—Ç–∏ –ø–æ –∫–æ–¥—É –ø–æ—Å—Ç—Ä–æ—á–Ω–æ, –Ω–µ –∑–∞—Ö–æ–¥—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏.

**–ü—Ä–∏–º–µ—Ä:**
```c
vTaskDelay(pdMS_TO_TICKS(1000));          ‚Üê –ö—É—Ä—Å–æ—Ä –∑–¥–µ—Å—å
printf_uart3("Tick:%lu\r\n", HAL_GetTick());  ‚Üê F10 ‚Üí –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—Å—è —Å—é–¥–∞
```

### Step Into (F11) ‚Äî –®–∞–≥ –≤–Ω—É—Ç—Ä—å

‚¨áÔ∏è **–ó–∞—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä—å —Ñ—É–Ω–∫—Ü–∏–∏** –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–µ.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏.

**–ü—Ä–∏–º–µ—Ä:**
```c
fram_read(&fram, 0x0150, (uint8_t *)rd_data, sizeof(wr_data));  ‚Üê –ö—É—Ä—Å–æ—Ä –∑–¥–µ—Å—å
```

–ù–∞–∂–º–∏—Ç–µ **F11** ‚Üí –æ—Ç–ª–∞–¥—á–∏–∫ –ø–µ—Ä–µ–π–¥—ë—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é `fram_read()` –≤ —Ñ–∞–π–ª–µ `fram.c`.

### Step Out (Shift+F11) ‚Äî –®–∞–≥ –Ω–∞—Ä—É–∂—É

‚¨ÜÔ∏è –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –≤—ã–∑—ã–≤–∞—é—â–µ–º—É –∫–æ–¥—É.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** —Å–ª—É—á–∞–π–Ω–æ –∑–∞—à–ª–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—é –∏ —Ö–æ—Ç–∏—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è.

### Step Back (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ Cortex-Debug)

‚ö†Ô∏è –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö –æ—Ç–ª–∞–¥—á–∏–∫–æ–≤, **–Ω–µ–ª—å–∑—è –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥** –≤ STM32.

---

## –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ü–∞–Ω–µ–ª—å VARIABLES

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏.

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ `StartDefaultTask()`:**

```
üîç VARIABLES
  ‚îú‚îÄ Local
  ‚îÇ   ‚îú‚îÄ argument = 0x00000000
  ‚îÇ   ‚îú‚îÄ diag_divider = 3
  ‚îÇ   ‚îú‚îÄ free_heap = 5960
  ‚îÇ   ‚îî‚îÄ min_heap = 5960
  ‚îî‚îÄ Global
      ‚îú‚îÄ huart1 = {...}
      ‚îú‚îÄ fram = {...}
      ‚îî‚îÄ uartQueue = 0x20000abc
```

### –†–∞—Å–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä

–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **‚ñ∂Ô∏è** —Ä—è–¥–æ–º —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ—ë –ø–æ–ª—è:

```
‚îú‚îÄ fram = {...}
‚îÇ   ‚îú‚îÄ i2c = 0x00000000
‚îÇ   ‚îú‚îÄ cs_port = GPIOA
‚îÇ   ‚îú‚îÄ cs_pin = 4
‚îÇ   ‚îî‚îÄ cfg = {...}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π (–≤–æ –≤—Ä–µ–º—è –æ—Ç–ª–∞–¥–∫–∏!)

1. **–ü–ö–ú –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π** ‚Üí Set Value
2. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: `10`

**–ü—Ä–∏–º–µ—Ä:**
```c
uint32_t diag_divider = 0;  // –ë—ã–ª–æ 0
```

–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ `4` ‚Üí —Å–ª–µ–¥—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è —Å—Ä–∞–∑—É –≤—ã–≤–µ–¥–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É.

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ RAM, –Ω–µ –≤ Flash. –ü–æ—Å–ª–µ reset –≤—Å—ë –≤–µ—Ä–Ω—ë—Ç—Å—è.

---

## –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏–π (WATCH)

**WATCH** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

1. –ü–∞–Ω–µ–ª—å **WATCH** ‚Üí –Ω–∞–∂–º–∏—Ç–µ **+**
2. –í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   - `diag_divider * 2`
   - `free_heap + min_heap`
   - `huart1.Instance == USART1`
   - `(char*)uart1_rx_buf`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üëÅÔ∏è WATCH
  ‚îú‚îÄ diag_divider * 2 = 6
  ‚îú‚îÄ free_heap + min_heap = 11920
  ‚îî‚îÄ (char*)uart1_rx_buf = "Hello"
```

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤

–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–∞—Å—Å–∏–≤ –±–∞–π—Ç –∫–∞–∫ —Å—Ç—Ä–æ–∫—É:
```
(char*)uart1_rx_buf
```

–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –∫–∞–∫ –º–∞—Å—Å–∏–≤:
```
*(uint8_t[10]*)buffer
```

---

## –°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤

**CALL STACK** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π, –ø—Ä–∏–≤–µ–¥—à–∏—Ö –∫ —Ç–µ–∫—É—â–µ–π —Ç–æ—á–∫–µ.

**–ü—Ä–∏–º–µ—Ä:**
```
üìû CALL STACK
  ‚îú‚îÄ fram_read() [fram.c:45]          ‚Üê –¢–µ–∫—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è
  ‚îú‚îÄ Uart1Task() [main.c:149]         ‚Üê –í—ã–∑–≤–∞–Ω–∞ –∏–∑ Uart1Task
  ‚îú‚îÄ vPortTaskWrapper() [port.c:217]  ‚Üê –û–±—ë—Ä—Ç–∫–∞ FreeRTOS
  ‚îî‚îÄ <signal handler>                 ‚Üê –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ
```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —ç–ª–µ–º–µ–Ω—Ç ‚Üí –∫–æ–¥ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –ø–∞–Ω–µ–ª–∏ VARIABLES –ø–æ–∫–∞–∂—É—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ **–≤—ã–±—Ä–∞–Ω–Ω–æ–π** —Ñ—É–Ω–∫—Ü–∏–∏

---

## –†–µ–≥–∏—Å—Ç—Ä—ã –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è

### CORTEX REGISTERS

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä—ã ARM Cortex-M4:

```
üßµ CORTEX REGISTERS
  ‚îú‚îÄ R0 = 0x00000000
  ‚îú‚îÄ R1 = 0x20000150
  ‚îú‚îÄ R2 = 0x00000007
  ‚îú‚îÄ PC = 0x08002a3c      ‚Üê Program Counter (—Ç–µ–∫—É—â–∏–π –∞–¥—Ä–µ—Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
  ‚îú‚îÄ SP = 0x2000ffa8      ‚Üê Stack Pointer
  ‚îú‚îÄ LR = 0x08002b15      ‚Üê Link Register (–∞–¥—Ä–µ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞)
  ‚îî‚îÄ xPSR = 0x21000000    ‚Üê Program Status Register
```

**–ö–æ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ:**
- –ê–Ω–∞–ª–∏–∑ HardFault (—Å–º–æ—Ç—Ä–∏–º PC, SP, LR)
- –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ—Ç–ª–∞–¥–∫–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

### CORTEX PERIPHERALS (SVD)

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç SVD —Ñ–∞–π–ª** –≤ `launch.json` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ).

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä—ã –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ STM32:

```
üíæ CORTEX PERIPHERALS
  ‚îú‚îÄ GPIOC
  ‚îÇ   ‚îú‚îÄ MODER = 0x00000000
  ‚îÇ   ‚îú‚îÄ ODR = 0x00002000    ‚Üê PC13 = 1 (LED on)
  ‚îÇ   ‚îî‚îÄ IDR = 0x00002000
  ‚îú‚îÄ USART1
  ‚îÇ   ‚îú‚îÄ CR1 = 0x0000200D
  ‚îÇ   ‚îú‚îÄ SR = 0x000000C0
  ‚îÇ   ‚îî‚îÄ DR = 0x00
  ‚îî‚îÄ SPI1
      ‚îî‚îÄ ...
```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –†–∞—Å–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—É—é –ø–µ—Ä–∏—Ñ–µ—Ä–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, GPIOC)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. **–ü–ö–ú ‚Üí Update** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

**–ü—Ä–∏–º–µ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
- UART –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `USART1.CR1` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω UE = 1)
- LED –Ω–µ –º–∏–≥–∞–µ—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `GPIOC.ODR` (–±–∏—Ç 13 –¥–æ–ª–∂–µ–Ω –º–µ–Ω—è—Ç—å—Å—è)

---

## –û—Ç–ª–∞–¥–∫–∞ FreeRTOS

Cortex-Debug –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É RTOS! –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

### RTOS View (–ø–∞–Ω–µ–ª—å –∑–∞–¥–∞—á)

–ü–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ breakpoint –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å **RTOS**:

```
üßµ RTOS (FreeRTOS)
  ‚îú‚îÄ ‚ñ∂Ô∏è defaultTask (Running)       ‚Üê –¢–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–¥–∞—á–∞
  ‚îÇ   ‚îî‚îÄ Stack: 1320/2048 bytes free
  ‚îú‚îÄ ‚è∏Ô∏è LedTask (Blocked)
  ‚îÇ   ‚îî‚îÄ Stack: 412/512 bytes free
  ‚îî‚îÄ ‚è∏Ô∏è Uart1Task (Blocked)
      ‚îî‚îÄ Stack: 1744/2048 bytes free
```

**–°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–¥–∞—á:**
- ‚ñ∂Ô∏è **Running** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–µ–π—á–∞—Å
- ‚è∏Ô∏è **Blocked** ‚Äî –∂–¥—ë—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `vTaskDelay()` –∏–ª–∏ —Å–µ–º–∞—Ñ–æ—Ä–∞)
- ‚èØÔ∏è **Ready** ‚Äî –≥–æ—Ç–æ–≤–∞ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é, –∂–¥—ë—Ç —Å–≤–æ–µ–π –æ—á–µ—Ä–µ–¥–∏
- ‚ùå **Suspended** ‚Äî –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏

–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–∞–¥–∞—á—É –≤ –ø–∞–Ω–µ–ª–∏ RTOS ‚Üí –ø–∞–Ω–µ–ª—å VARIABLES –ø–æ–∫–∞–∂–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ **—ç—Ç–æ–π –∑–∞–¥–∞—á–∏**.

**–ü—Ä–∏–º–µ—Ä:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å –Ω–∞ breakpoint –≤ `defaultTask`, –∑–∞—Ç–µ–º –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ `Uart1Task` ‚Üí —É–≤–∏–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `Uart1Task()`:
```
üîç VARIABLES (Uart1Task)
  ‚îú‚îÄ command = {0x70, 0x00, ...}
  ‚îú‚îÄ ok = {0xBF, 0x00}
  ‚îî‚îÄ index = 2
```

### Call Stack –∑–∞–¥–∞—á RTOS

–î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ—ë Call Stack:
```
üìû CALL STACK (Uart1Task)
  ‚îú‚îÄ vTaskDelay() [tasks.c:1425]
  ‚îú‚îÄ Uart1Task() [main.c:169]
  ‚îî‚îÄ vPortTaskWrapper() [port.c:217]
```

---

## –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–ª–∞–¥–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–ª–∞

**–°–∏–º–ø—Ç–æ–º—ã:** LED –Ω–µ –º–∏–≥–∞–µ—Ç, UART –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç.

**–û—Ç–ª–∞–¥–∫–∞:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç–ª–∞–¥–∫—É (F5)
2. –ù–∞–∂–º–∏—Ç–µ **Pause (F6)**
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ **CALL STACK** ‚Äî –≥–¥–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞—Å—Ç—Ä—è–ª–∞?

**–ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
```c
while (HAL_UART_GetState(&huart1) != HAL_UART_STATE_READY);  // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
```

**–†–µ—à–µ–Ω–∏–µ:** –¥–æ–±–∞–≤—å—Ç–µ timeout –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ª–∏ UART.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: HardFault (–∞–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)

**–°–∏–º–ø—Ç–æ–º—ã:** –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, LED –∑–∞–º–∏—Ä–∞–µ—Ç.

**–û—Ç–ª–∞–¥–∫–∞:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç–ª–∞–¥–∫—É (F5)
2. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤ `HardFault_Handler()`:
   ```c
   void HardFault_Handler(void) {
     while (1) { }  ‚Üê –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–¥–µ—Å—å
   }
   ```

3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ **CALL STACK** ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥ HardFault
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **CORTEX REGISTERS**:
   - **PC** (Program Counter) ‚Äî –∞–¥—Ä–µ—Å, –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
   - **LR** (Link Register) ‚Äî –∞–¥—Ä–µ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞

5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** ‚Äî —á–∞—Å—Ç–æ —ç—Ç–æ —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ `NULL` —É–∫–∞–∑–∞—Ç–µ–ª—è:
   ```c
   char *ptr = NULL;
   *ptr = 'A';  // ‚Üê HardFault!
   ```

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã HardFault:**
- –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ `NULL` —É–∫–∞–∑–∞—Ç–µ–ª—é
- –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç–µ–∫–∞ (stack overflow)
- –ù–µ–≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏
- –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–º–µ–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä:**
```c
uint8_t command[UART_BUF_SIZE];
// –û–∂–∏–¥–∞–µ–º {0x70, 0x01}, –Ω–æ –ø–æ–ª—É—á–∞–µ–º {0xFF, 0xFF, ...}
```

**–û—Ç–ª–∞–¥–∫–∞:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ breakpoint –Ω–∞ —Å—Ç—Ä–æ–∫—É **–¥–æ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–∞–Ω–µ–ª–∏ **VARIABLES**
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Step Over (F10)**, —á—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ –ø–æ –∫–æ–¥—É –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
4. –°–º–æ—Ç—Ä–∏—Ç–µ, –≥–¥–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- –ë—É—Ñ–µ—Ä –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
- –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å–∏–≤–∞ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: UART –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–û—Ç–ª–∞–¥–∫–∞:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ breakpoint –≤ `HAL_UART_RxCpltCallback()`:
   ```c
   void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart) {
     if (huart->Instance == USART1) {  üî¥ ‚Üê Breakpoint
       // ...
     }
   }
   ```

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ UART ‚Üí breakpoint –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å
3. –ï—Å–ª–∏ **–Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ª–∏ UART: `huart1.Instance == USART1`
   - –í–∫–ª—é—á–µ–Ω—ã –ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è: `HAL_UART_Receive_IT()` –≤—ã–∑–≤–∞–Ω?
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ baudrate (38400 –¥–ª—è USART1)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: FreeRTOS –∑–∞–¥–∞—á–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:** `LedTask` –Ω–µ –º–∏–≥–∞–µ—Ç —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–º.

**–û—Ç–ª–∞–¥–∫–∞:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç–ª–∞–¥–∫—É (F5)
2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É (Pause)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å **RTOS**
4. –ù–∞–π–¥–∏—Ç–µ –∑–∞–¥–∞—á—É ‚Üí –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –µ—ë **—Å–æ—Å—Ç–æ—è–Ω–∏–µ**:
   - **Blocked** ‚Äî –∂–¥—ë—Ç (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–∞ –∂–¥—ë—Ç: —Å–µ–º–∞—Ñ–æ—Ä, –æ—á–µ—Ä–µ–¥—å, delay?)
   - **Ready** ‚Äî –≥–æ—Ç–æ–≤–∞, –Ω–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç?)
   - **Suspended** ‚Äî –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é

5. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–∞–¥–∞—á—É ‚Üí –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ **CALL STACK** ‚Äî –≥–¥–µ –æ–Ω–∞ –∑–∞—Å—Ç—Ä—è–ª–∞

**–ü—Ä–∏–º–µ—Ä:**
```
üßµ LedTask (Blocked)
  üìû CALL STACK
    ‚îú‚îÄ vTaskDelay() [tasks.c:1425]     ‚Üê –ñ–¥—ë—Ç 5000 –º—Å
    ‚îî‚îÄ LedTask() [main.c:103]
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç–µ–∫–∞ (Stack Overflow)

**–°–∏–º–ø—Ç–æ–º—ã:** HardFault –∏–ª–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–µ –ø–æ—Å–ª–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã.

**–û—Ç–ª–∞–¥–∫–∞:**
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É (Pause)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å **RTOS**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Stack free** –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
   ```
   ‚îú‚îÄ defaultTask
   ‚îÇ   ‚îî‚îÄ Stack: 50/2048 bytes free  ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –º–∞–ª–æ!
   ```

4. –ï—Å–ª–∏ —Å—Ç–µ–∫ –ø–æ—á—Ç–∏ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è ‚Üí —É–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞:
   ```c
   const osThreadAttr_t defaultTask_attributes = {
       .stack_size = 4096,  // –ë—ã–ª–æ 2048
   };
   ```

**–ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å:**
- –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –±–æ–ª—å—à–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –ø–∞–º—è—Ç—å (`pvPortMalloc()`) –¥–ª—è –±–æ–ª—å—à–∏—Ö –±—É—Ñ–µ—Ä–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–µ–∫ —á–µ—Ä–µ–∑ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É (`uxTaskGetStackHighWaterMark()`)

---

## SWO —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞

**SWO (Serial Wire Output)** ‚Äî –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ ST-Link.

### –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω SWO?

- üìä **ITM —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞** ‚Äî –≤—ã–≤–æ–¥ printf –±–µ–∑ UART
- ‚è±Ô∏è **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- üìà **Data Watchpoints** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SWO (–¥–ª—è STM32F411)

‚ö†Ô∏è **–í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ SWO –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.**

–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å SWO:

1. –î–æ–±–∞–≤—å—Ç–µ –≤ `launch.json`:
   ```json
   {
     "name": "Debug (OpenOCD + SWO)",
     "swoConfig": {
       "enabled": true,
       "cpuFrequency": 96000000,  // SYSCLK 96 MHz
       "swoFrequency": 2000000,   // 2 MHz
       "source": "probe",
       "decoders": [
         {"type": "console", "port": 0, "label": "ITM"}
       ]
     }
   }
   ```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ITM_SendChar()` –≤–º–µ—Å—Ç–æ `printf()` –¥–ª—è –≤—ã–≤–æ–¥–∞:
   ```c
   ITM_SendChar('A');
   ```

3. –í—ã–≤–æ–¥ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø–∞–Ω–µ–ª–∏ **OUTPUT ‚Üí ITM (port 0)**.

---

## –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–ª–∞–≤–∏—à–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|----------|
| **–ó–∞–ø—É—Å–∫ –æ—Ç–ª–∞–¥–∫–∏** | `F5` | –ù–∞—á–∞—Ç—å –æ—Ç–ª–∞–¥–∫—É (build + flash + debug) |
| **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç–ª–∞–¥–∫–∏** | `Shift+F5` | –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é –æ—Ç–ª–∞–¥–∫–∏ |
| **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫** | `Ctrl+Shift+F5` | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É |
| **Continue** | `F5` | –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |
| **Pause** | `F6` | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |
| **Step Over** | `F10` | –®–∞–≥ —á–µ—Ä–µ–∑ (–Ω–µ –∑–∞—Ö–æ–¥–∏—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏) |
| **Step Into** | `F11` | –®–∞–≥ –≤–Ω—É—Ç—Ä—å (–∑–∞—Ö–æ–¥–∏—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏) |
| **Step Out** | `Shift+F11` | –®–∞–≥ –Ω–∞—Ä—É–∂—É (–≤—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏) |
| **Toggle Breakpoint** | `F9` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Å–Ω—è—Ç—å breakpoint |
| **Disable All Breakpoints** | `Ctrl+F9` | –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ breakpoints |
| **Debug Console** | `Ctrl+Shift+Y` | –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –æ—Ç–ª–∞–¥–∫–∏ |

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –æ—Ç–ª–∞–¥—á–∏–∫ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–û—à–∏–±–∫–∞:** `Error: init mode failed (unable to connect to the target)`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ST-Link (USB –∫–∞–±–µ–ª—å, –ø–∏—Ç–∞–Ω–∏–µ –ø–ª–∞—Ç—ã)
2. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ ST-Link (STM32CubeIDE, ST-Link Utility)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VS Code
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é:
   ```bash
   openocd -f Run.cfg
   ```

---

### –ü—Ä–æ–±–ª–µ–º–∞: breakpoint –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ö–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:** —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–æ–æ–±—â–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–∫—É –ø—Ä–æ–≥—Ä–∞–º–º—ã

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞:** –∫–æ–¥ —É–¥–∞–ª—ë–Ω –∫–∞–∫ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –≤ Debug —Ä–µ–∂–∏–º–µ (`-O0 -g3`)

3. **Breakpoint –Ω–∞ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–µ:** –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–ª–∏ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–µ
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ —Å –∫–æ–¥–æ–º

4. **–ü—Ä–æ—à–∏–≤–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞:** –∫–æ–¥ –∏–∑–º–µ–Ω–∏–ª—Å—è, –Ω–æ –Ω–µ –ø—Ä–æ—à–∏—Ç
   - –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –ø—Ä–æ—à–µ–π—Ç–µ: `Ctrl+Shift+B` ‚Üí Flash

---

### –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ –≤–∏–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:** `<optimized out>` –∏–ª–∏ `<unavailable>`

**–ü—Ä–∏—á–∏–Ω–∞:** –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω —Å —Ñ–ª–∞–≥–∞–º–∏ Debug: `-O0 -g3`
2. –û–±—ä—è–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∫–∞–∫ `volatile`:
   ```c
   volatile uint32_t debug_value = 123;
   ```

---

### –ü—Ä–æ–±–ª–µ–º–∞: RTOS –ø–∞–Ω–µ–ª—å –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏

**–ü—Ä–∏—á–∏–Ω–∞:** Cortex-Debug –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª FreeRTOS.

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `launch.json` —Å–æ–¥–µ—Ä–∂–∏—Ç:
   ```json
   "rtos": "FreeRTOS"
   ```

2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å —Å–∏–º–≤–æ–ª–∞–º–∏ –æ—Ç–ª–∞–¥–∫–∏ (`-g3`)

---

### –ü—Ä–æ–±–ª–µ–º–∞: –æ—Ç–ª–∞–¥—á–∏–∫ "–ø—Ä—ã–≥–∞–µ—Ç" –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –ø–µ—Ä–µ—Å—Ç–∞–≤–∏–ª–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ `-O1` –∏–ª–∏ –≤—ã—à–µ
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ `-O0` –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ debug

---

### –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ –≤–∏–¥–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ (SVD)

**–ü—Ä–∏—á–∏–Ω–∞:** –Ω–µ —É–∫–∞–∑–∞–Ω SVD —Ñ–∞–π–ª.

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–∫–∞—á–∞–π—Ç–µ `STM32F411xE.svd` –∏–∑ [CMSIS-SVD repo](https://github.com/posborne/cmsis-svd/blob/master/data/STMicro/STM32F411.svd)
2. –ü–æ–ª–æ–∂–∏—Ç–µ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
3. –í `launch.json` —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å:
   ```json
   "svdFile": "${workspaceFolder}/STM32F411xE.svd"
   ```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Logpoints –≤–º–µ—Å—Ç–æ printf

–í–º–µ—Å—Ç–æ:
```c
printf("Value: %d\n", value);  // –ú–µ–¥–ª–µ–Ω–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç UART
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Logpoint** (–ü–ö–ú –Ω–∞ –Ω–æ–º–µ—Ä–µ —Å—Ç—Ä–æ–∫–∏ ‚Üí Add Logpoint):
```
Value: {value}
```

–í—ã–≤–æ–¥ –±—É–¥–µ—Ç –≤ **Debug Console** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞!

### 2. Conditional Breakpoints –¥–ª—è —Ü–∏–∫–ª–æ–≤

–í–º–µ—Å—Ç–æ 100 —Ä–∞–∑ –Ω–∞–∂–∏–º–∞—Ç—å F5, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Å–ª–æ–≤–∏–µ:

```c
for (int i = 0; i < 100; i++) {
  process(i);  üî¥ –£—Å–ª–æ–≤–∏–µ: i == 50
}
```

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ 50-–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

### 3. –ò–Ω—Å–ø–µ–∫—Ü–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π

–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–∞—Å—Å–∏–≤ –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é:
```
*(uint8_t[10]*)buffer  // –ü–µ—Ä–≤—ã–µ 10 –±–∞–π—Ç
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–æ–≤

–í WATCH –¥–æ–±–∞–≤—å—Ç–µ:
```
(GPIOC->ODR & (1 << 13)) != 0  // LED —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

### 5. Hex/Bin —Ñ–æ—Ä–º–∞—Ç

–ü–ö–ú –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Üí **Hexadecimal Display** –∏–ª–∏ **Binary Display**.

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow

### –¢–∏–ø–∏—á–Ω–∞—è —Å–µ—Å—Å–∏—è –æ—Ç–ª–∞–¥–∫–∏:

```mermaid
graph TD
    A[–ó–∞–ø—É—Å–∫ –æ—Ç–ª–∞–¥–∫–∏ F5] --> B[–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ main]
    B --> C[–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å breakpoint –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ]
    C --> D[Continue F5]
    D --> E[–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ breakpoint]
    E --> F[–ò–Ω—Å–ø–µ–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö VARIABLES]
    F --> G{–ù–∞—à–ª–∏ –ø—Ä–æ–±–ª–µ–º—É?}
    G -->|–î–∞| H[–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥]
    G -->|–ù–µ—Ç| I[Step Over F10 / Step Into F11]
    I --> F
    H --> J[Stop Shift+F5]
    J --> K[Rebuild Ctrl+Shift+B]
    K --> A
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Cortex-Debug Wiki**: https://github.com/Marus/cortex-debug/wiki
- **GDB Commands**: https://sourceware.org/gdb/current/onlinedocs/gdb/
- **FreeRTOS Debugging**: https://www.freertos.org/Debugging-Hard-Faults-On-Cortex-M-Microcontrollers.html
- **STM32 Debug Guide**: https://www.st.com/resource/en/application_note/an5361-getting-started-with-projects-based-on-dualcore-stm32h7-microcontrollers-in-stm32cubeide-stmicroelectronics.pdf

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-02-16*

**–£–¥–∞—á–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏!** üêõüîç –ù–∞–∂–º–∏—Ç–µ `F5` –¥–ª—è –Ω–∞—á–∞–ª–∞!
